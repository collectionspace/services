<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <parent>
        <groupId>org.collectionspace.services</groupId>
        <artifactId>org.collectionspace.services.media</artifactId>
        <version>${revision}</version>
    </parent>

    <modelVersion>4.0.0</modelVersion>
    <artifactId>org.collectionspace.services.media.client</artifactId>
    <name>services.media.client</name>

    <dependencies>
<!-- CollectionSpace dependencies -->
        <dependency>
            <groupId>org.collectionspace.services</groupId>
            <artifactId>org.collectionspace.services.authority.jaxb</artifactId>
            <optional>true</optional>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>org.collectionspace.services</groupId>
            <artifactId>org.collectionspace.services.jaxb</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>org.collectionspace.services</groupId>
            <artifactId>org.collectionspace.services.common</artifactId>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>org.collectionspace.services</groupId>
            <artifactId>org.collectionspace.services.client</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>org.collectionspace.services</groupId>
            <artifactId>org.collectionspace.services.blob.client</artifactId>
            <version>${project.version}</version>
        </dependency>
         <dependency>
            <groupId>org.collectionspace.services</groupId>
            <artifactId>org.collectionspace.services.media.jaxb</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>org.collectionspace.services</groupId>
            <artifactId>org.collectionspace.services.person.client</artifactId>
            <version>${project.version}</version>
        </dependency>
      <dependency>
        <groupId>org.collectionspace.services.blob</groupId>
        <artifactId>blob-test-utils</artifactId>
        <version>${project.version}</version>
        <scope>test</scope>
      </dependency>
<!-- External dependencies -->
        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-jaxrs</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-jaxb-provider</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-multipart-provider</artifactId>
        </dependency>
        <dependency>
            <groupId>commons-httpclient</groupId>
            <artifactId>commons-httpclient</artifactId>
        </dependency>
    </dependencies>

    <build>
      <finalName>collectionspace-services-media-client</finalName>

      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-remote-resources-plugin</artifactId>
          <configuration>
            <resourceBundles>
              <resourceBundle>org.collectionspace.services.blob:blob-test-utils:${project.version}</resourceBundle>
            </resourceBundles>
          </configuration>
          <executions>
            <execution>
              <goals>
                <goal>process</goal>
              </goals>
            </execution>
          </executions>
        </plugin>

        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>build-helper-maven-plugin</artifactId>
          <version>3.6.0</version>
          <configuration>
            <portNames>
              <portName>jetty.port</portName>
              <portName>jetty.stop.port</portName>
            </portNames>
            <fileSet/>
            <name/>
            <regex/>
            <source/>
            <value/>
          </configuration>
          <executions>
            <execution>
              <id>reserve-port</id>
              <phase>test-compile</phase>
              <goals>
                <goal>reserve-network-port</goal>
              </goals>
            </execution>
          </executions>
        </plugin>

        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>3.5.3</version>
          <configuration>
            <excludes>
              <exclude>**/*IT.class</exclude>
            </excludes>
          </configuration>
        </plugin>

        <plugin>
          <groupId>org.eclipse.jetty</groupId>
          <artifactId>jetty-maven-plugin</artifactId>
          <configuration>
            <httpConnector>
              <port>${jetty.port}</port>
            </httpConnector>
            <stopKey>quit</stopKey>
            <stopPort>${jetty.stop.port}</stopPort>
            <stopWait>10</stopWait>
            <contextHandlers>
              <contextHandler implementation="org.eclipse.jetty.server.handler.ContextHandler">
                <contextPath>/static</contextPath>
                <resourceBase>${project.build.directory}/maven-shared-archive-resources</resourceBase>
                <handler implementation="org.eclipse.jetty.server.handler.ResourceHandler" />
              </contextHandler>
            </contextHandlers>
            <supportedPackagings>jar</supportedPackagings>
          </configuration>
        </plugin>

        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-failsafe-plugin</artifactId>
          <configuration>
            <systemPropertyVariables>
              <jetty.port>${jetty.port}</jetty.port>
            </systemPropertyVariables>
          </configuration>
        </plugin>
      </plugins>
    </build>
</project>
